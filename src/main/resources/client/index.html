<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<link rel="shortcut icon" type="image/ico" href="" />
		
		<title>UK&Int Dashboard</title>
		<style type="text/css" title="currentStyle">
			//@import "base.css";
		</style>

		<script type="text/javascript" src="lib/jquery-1.10.2.min.js"></script>

		<script type="text/javascript">

	        function load(){
				$.ajax({
				           type: 'GET',
				           url: "http://localhost/rest/report/events",
				           processData: true,
				           data: {},
				           dataType: "json",
				           success: function (data) {
				               buildTable(data);
				           }
				});

	        }

			// Builds the HTML Table out of myList.
			function buildTable(myList) {


			    var columns = addAllColumnHeaders(myList);

			    for (var i = 0 ; i < myList.length ; i++) {
			        var row$ = $('<tr/>');
			        for (var colIndex = 0 ; colIndex < columns.length ; colIndex++) {
			            var cellValue = myList[i][columns[colIndex]];

			            if (cellValue == null) { cellValue = ""; }

			            row$.append($('<td/>').html(cellValue));
			        }
			        $("#excelDataTable").append(row$);
			    }
			}

			// Adds a header row to the table and returns the set of columns.
			// Need to do union of keys from all records as some records may not contain
			// all records
			function addAllColumnHeaders(myList){
			    var columnSet = [];
			    var headerTr$ = $('<tr/>');

			    for (var i = 0 ; i < myList.length ; i++) {
			        var rowHash = myList[i];
			        for (var key in rowHash) {
			            if ($.inArray(key, columnSet) == -1){
			                columnSet.push(key);
			                headerTr$.append($('<th/>').html(key));
			            }
			        }
			    }
			    $("#excelDataTable").append(headerTr$);
			    return columnSet;
			}

	 </script>

	</head>
	<body onLoad="load();">
			<h1>
				UK&Int Dashboard
			</h1>
			
			<h2>Add new Event</h2>

			<form></form>
			<h2>List of Events</h2>

			<table id="excelDataTable" border="1"></table>
	</body>â€‹
</html>